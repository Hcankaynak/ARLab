using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.XR.iOS;

public class Spawn : MonoBehaviour
{
    public GameObject HCl;
    public GameObject syringe;
    public GameObject litmusPaper;
    public GameObject Apple;
    public GameObject selectedObject;
    public GameObject Cola;
    public GameObject Listerin;
    public GameObject Soda;
    public GameObject SodyumHidroksit;
    public GameObject Amonyak;
    public GameObject DetergentWater;
    public GameObject pH;


    public float maxRayDistance = 30.0f;

    // Start is called before the first frame update
    void Start()
    {
        selectedObject = null;
        
    }

    // Update is called once per frame
    void Update()
    {
        if (PlayerPrefs.HasKey("achi"))
        {

        }
        var touch = Input.GetTouch(0);
        if (touch.phase == TouchPhase.Began)
        {
            Ray ray = Camera.main.ScreenPointToRay(touch.position);
            RaycastHit hit;

            //we'll try to hit one of the plane collider gameobjects that were generated by the plugin
            //effectively similar to calling HitTest with ARHitTestResultType.ARHitTestResultTypeExistingPlaneUsingExtent
            if (Physics.Raycast(ray, out hit, maxRayDistance))
            {
                if (hit.collider.tag == "Surface")
                {
                    if (selectedObject != null)
                    {
                        if(selectedObject == syringe)
                        {
                            GameObject go = Instantiate(selectedObject, hit.point + new Vector3(0, 0.0825f, 0), transform.rotation);
                        }
                        else
                        {
                            GameObject go = Instantiate(selectedObject, hit.point + new Vector3(0, 0.0005f, 0), transform.rotation);
                        }
                       
                        if(selectedObject == HCl)
                        {
                            PlayerPrefs.SetInt("flask", 1);
                            Debug.Log("new achievement");
                        }
                        else if (selectedObject == Apple)
                        {
                            PlayerPrefs.SetInt("base", 1);
                            Debug.Log("new achievement");
                        }
                        else if (selectedObject == syringe)
                        {
                            PlayerPrefs.SetInt("syringe", 1);
                            Debug.Log("new achievement");
                        }
                        
                        selectedObject = null;
                        
                    }
                }
            }

        }
    }

    public void selectHCl()
    {
        selectedObject = HCl;
    }

    public void selectSyringe()
    {
        selectedObject = syringe;
    }

    public void selectLitmusPaper()
    {
        selectedObject = litmusPaper;
    }
    public void selectApple()
    {
        selectedObject = Apple;
    }
    public void selectCola()
    {
        selectedObject = Cola;
    }
    public void selectListerin()
    {
        selectedObject = Listerin;
    }
    public void selectSoda()
    {
        selectedObject = Soda;
    }
    public void selectSodyum()
    {
        selectedObject = SodyumHidroksit;
    }
    public void selectAmonyak()
    {
        selectedObject = Amonyak;
    }
    public void selectDetergentWater()
    {
        selectedObject = DetergentWater;
    }
    public void selectpHScale()
    {
        selectedObject = pH;
    }

}